## Ограничения
### Ограничения на запросы

Для JSON API установлены следующие ограничения:

+ Не более 45 запросов за 3 секундный период от аккаунта
+ Не более 5 параллельных запросов от одного пользователя
+ Не более 20 параллельных запросов от аккаунта
+ Не более 8Кб в заголовке запроса (url, User-Agent, Authorization и т.д.)
+ Не более 20 Мб данных в одном запросе, отправляемом на сервер
+ Не более 4 [асинхронных задач](#mojsklad-json-api-asinhronnyj-obmen) в очереди на аккаунт
+ Обязательное использование [сжатия содержимого ответов](#mojsklad-json-api-obschie-swedeniq-szhatie-soderzhimogo-otwetow)

Также накладывается ограничение на максимальное число объектов (позиций, материалов, продуктов), передаваемых в одном массиве в запросе - не более 1000 элементов.
В случае, если количество элементов коллекции превышает максимально допустимое, произойдет ошибка со статусом 413.
Если количество позиций превышает максимально допустимое, то для дальнейшего пополнения позиций нужно будет работать со специальным ресурсом,
описание которого приведено в конкретной сущности.

### Ограничения на поведение

В JSON API действует система автоматической блокировки доступа пользователям, которые нарушили следующие правила работы с сервисом (могут дополняться и уточняться):

+ Правила мгновенного отключения
  + Пользователь совершил более 500 идентичных запросов за минуту, которые завершились ошибкой, в течение последнего часа.
+ Правила оключения с предварительным оповещением о проблеме на адрес электронной почты владельца аккаунта
  + в разработке

При отключении пользователя на адрес электронной почты владельца аккаунта отправится письмо, содержащие причину и имя пользователя, которого отключили. 

Если вы столкнулись с отключением от JSON API, вам необходимо исправить сломанную интеграцию и написать в поддержку запрос на включение JSON API.

### Вариант с таблицей

Для JSON API установлены следующие ограничения:

| Ограничение                                                                                                                    | Последствия нарушения                                                                                                                                                                             |
|--------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Не более 45 запросов за 3 секундный период от аккаунта                                                                         | Запрос отклонен с ошибкой 429                                                                                                                                                                     |
| Не более 5 параллельных запросов от одного пользователя                                                                        | Запрос отклонен с ошибкой 429                                                                                                                                                                     |
| Не более 20 параллельных запросов от аккаунта                                                                                  | Запрос отклонен с ошибкой 429                                                                                                                                                                     |
| Не более 8Кб в заголовке запроса (url, User-Agent, Authorization и т.д.)                                                       | Запрос отклонен с ошибкой 412                                                                                                                                                                     |
| Не более 20 Мб данных в одном запросе, отправляемом на сервер                                                                  | Запрос отклонен с ошибкой 412                                                                                                                                                                     |
| Не более 4 [асинхронных задач](#mojsklad-json-api-asinhronnyj-obmen) в очереди на аккаунт                                      | Запрос отклонен с ошибкой 412                                                                                                                                                                     |
| Не использовано [сжатия содержимого ответов](#mojsklad-json-api-obschie-swedeniq-szhatie-soderzhimogo-otwetow)                 | Запрос отклонен с ошибкой 415                                                                                                                                                                     |
| Передано более 1000 объектов в одном массиве в запросе                                                                         | Запрос отклонен с ошибкой 413                                                                                                                                                                     |
| Пользователь аккаунта совершил более 500 идентичных запросов за минуту, которые завершились ошибкой, в течение последнего часа | Пользователю будет отключен доступ к JSON API, а владелец аккаунта получит письмо с прициной блокировки и логином заблокированного пользователя                                                   |
| Правило с мгновенным отключением 1                                                                                             | Пользователю будет отключен доступ к JSON API, а владелец аккаунта получит письмо с прициной блокировки и логином заблокированного пользователя                                                   |
| Правило с мгновенным отключением 2                                                                                             | Пользователю будет отключен доступ к JSON API, а владелец аккаунта получит письмо с прициной блокировки и логином заблокированного пользователя                                                   |
| Правило с мгновенным отключением 3                                                                                             | Пользователю будет отключен доступ к JSON API, а владелец аккаунта получит письмо с прициной блокировки и логином заблокированного пользователя                                                   |
| Правило с предварительной нотификацией 1                                                                                       | Владельцу аккаунта на адрес электронной почты направится письмо о пользователе и его проблеме, и если проблема не будет устранена, то через N часов пользователю будет отключен доступ к JSON API |
| Правило с предварительной нотификацией 2                                                                                       | Владельцу аккаунта на адрес электронной почты направится письмо о пользователе и его проблеме, и если проблема не будет устранена, то через M часов пользователю будет отключен доступ к JSON API |
| Правило с предварительной нотификацией 3                                                                                       | Владельцу аккаунта на адрес электронной почты направится письмо о пользователе и его проблеме, и если проблема не будет устранена, то через K часов пользователю будет отключен доступ к JSON API |

Если вы столкнулись с отключением пользователя от JSON API, вам необходимо исправить сломанную интеграцию и написать в поддержку запрос на включение JSON API.
